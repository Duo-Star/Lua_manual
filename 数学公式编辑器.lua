--æ•°å­¦å…¬å¼ç¼–è¾‘å™¨
--ä¸ºä¼˜é›…çš„è¾“å…¥æ•°å­¦å…¬å¼è€Œç”Ÿ
--ä½œè€…ï¼šDuo  QQï¼š113530014
--æ›´æ–°æ—¥å¿—ï¼š
--       11.22.amï¼šå†™é”®ç›˜æ¡†æ¶ï¼Œé¡¹ç›®åï¼šæ•°å­¦å…¬å¼ç¼–è¾‘å™¨
--       11.22.pmï¼šä¼˜åŒ–f(x)è¾“å…¥ï¼Œæ–°å¢è®¡ç®—åŠŸèƒ½

--æˆ‘ä»¬æ—¨åœ¨å°†math.sin(ä¾‹)æ›¿æ¢ä¸ºsinä»è€Œæ–¹ä¾¿è¾“å…¥è®¡ç®—
--æ³¨æ„ï¼šä¾‹å¦‚è¦è¾“å…¥âˆš2ï¼Œè¯·è¾“å…¥âˆš(x)
--å¸¸ç”¨å‡½æ•°åœ¨f(x)ä¸­å¯ä»¥æ‰¾åˆ°


--æœ¬äººç”¨å¹³æ¿ç”µè„‘ç¼–å†™ï¼Œæ‰‹æœºæŸ¥çœ‹æ—¶å¸ƒå±€å¦‚æœ‰å¼‚å¸¸è¯·æŒ‡å‡ºğŸ˜˜


local uiManager=this.uiManager
local themeConfig=uiManager.themeConfig
local colors="0"--themeConfig.getColors()--ä¸»é¢˜è‰²è·Ÿéš
local MaterialCardView = luajava.bindClass "com.google.android.material.card.MaterialCardView"
import "androidx.cardview.widget.CardView"
import "androidx.appcompat.widget.AppCompatSpinner"
import "androidx.appcompat.widget.PopupMenu"
import "android.widget.PopupMenu"
import "java.io.File"--å¯¼å…¥Fileç±»

h=activity.getHeight()
w=activity.getWidth()




é“={
  FrameLayout,
  {
    CardView;--å¡ç‰‡æ§ä»¶
    layout_margin='8dp';--è¾¹è·
    --layout_gravity='center';--é‡åŠ›
    --å·¦:left å³:right ä¸­:center é¡¶:top åº•:bottom
    layout_marginTop='20dp';--é¡¶è·
    elevation='2dp';--é˜´å½±
    layout_width='fill';--å®½åº¦
    layout_height=h-1090;--é«˜åº¦
    CardBackgroundColor='#ffffffff';--é¢œè‰²
    radius='8dp';--åœ†è§’
    {
      EditText;
      layout_width="fill";
      id="è®¡ç®—æ¡†";
      layout_height="fill";
      background="#00000000";
      gravity="left";
    };
  };

  {
    LinearLayout;
    layout_width="fill";
    layout_marginTop=h-1050;--é¡¶è·
    {
      CardView;
      layout_margin="10dp";
      layout_height="43dp";
      layout_width="fill";
      radius='6dp';--å¡ç‰‡åœ†è§’
      {
        EditText;
        id="edit";
        layout_marginLeft='10dp';--å¸ƒå±€å·¦è·
        background="#FFFFFFFF";
        layout_gravity="center";
        gravity="left";
        textSize="16sp",--æ–‡æœ¬å¤§å°
        --  imeOptions="actionSearch";--è®¾ç½®é”®ç›˜å³ä¸‹è§’æ“ä½œ
        id="ç¼–è¾‘æ¡†",
        singleLine="true";
        Hint="Enter math problem";
        layout_width="fill";
      };

      {
        MaterialCardView,
        elevation="0",
        radius="30dp",
        layout_gravity="center|right";
        cardBackgroundColor="#FFFCFCFC",
        layout_marginRight='75dp';--å³è·
        layout_width="35dp",
        layout_height="35dp",
        cardElevation=0,
        id="æ¸…ç©º";
        onClick=function()
          ç¼–è¾‘æ¡†.setText("");
          task(80,function()--1000æ¯«ç§’=1ç§’
            æ¸…ç©º.Visibility=8;--éšè—æ§ä»¶
          end)

        end,
        {
          TextView,
          --textColor="#ff000000",
          text="æ¸…ç©º",
          textSize="15sp",
          layout_gravity='center';--å¡ç‰‡é‡åŠ›
        };
      };
      {
        MaterialCardView,
        elevation="0",
        --radius="5dp",
        layout_gravity="center|right";
        cardBackgroundColor="#FFE9E9E9",
        layout_width="70dp",
        layout_height="48dp",
        cardElevation=0,
        id="å®Œæˆ",
        {
          TextView,
          --textColor="#ff000000",
          text="OK",
          textSize="15sp",
          layout_gravity='center';--å¡ç‰‡é‡åŠ›
        };
      };
    };
  };

  {
    LinearLayout,--çº¿æ€§å¸ƒå±€
    --orientation='vertical',--æ–¹å‘
    layout_width='fill',--å®½åº¦
    layout_height='130',--é«˜åº¦
    layout_marginTop=h-850;--é¡¶è·
    background='#00FFFFFF',--èƒŒæ™¯é¢œè‰²æˆ–å›¾ç‰‡è·¯å¾„
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginLeft='3.75%w';--å·¦è·
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("x");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" x ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("y");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" y ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("Ï€");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" Ï€ ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("e");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" Ğµ ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("7");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 7 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("8");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 8 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("9");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 9 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
  };

  --###########################################

  {
    LinearLayout,--çº¿æ€§å¸ƒå±€
    --orientation='vertical',--æ–¹å‘
    layout_width='fill',--å®½åº¦
    layout_height='130',--é«˜åº¦
    layout_marginTop=h-700;--é¡¶è·
    background='#00FFFFFF',--èƒŒæ™¯é¢œè‰²æˆ–å›¾ç‰‡è·¯å¾„
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginLeft='3.75%w';--å·¦è·
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("^");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" ^ ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("âˆš");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" âˆš ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("abs");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" |â–¡| ",
        textSize="15sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      id="é€‰æ‹©å‡½æ•°";
      onClick=function()
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" f(x) ",
        textSize="15sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("4");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 4 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("5");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 5 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("6");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 6 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
  };

  --##############################################

  {
    LinearLayout,--çº¿æ€§å¸ƒå±€
    --orientation='vertical',--æ–¹å‘
    layout_width='fill',--å®½åº¦
    layout_height='130',--é«˜åº¦
    layout_marginTop=(h-550);--é¡¶è·
    background='#00FFFFFF',--èƒŒæ™¯é¢œè‰²æˆ–å›¾ç‰‡è·¯å¾„
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginLeft='3.75%w';--å·¦è·
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("+");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" + ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("-");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" - ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("*");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" * ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("/");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" / ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("1");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 1 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("2");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 2 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("3");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 3 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
  };


  --###########################################

  {
    LinearLayout,--çº¿æ€§å¸ƒå±€
    --orientation='vertical',--æ–¹å‘
    layout_width='fill',--å®½åº¦
    layout_height='130',--é«˜åº¦
    layout_marginTop=(h-400);--é¡¶è·
    background='#00FFFFFF',--èƒŒæ™¯é¢œè‰²æˆ–å›¾ç‰‡è·¯å¾„
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginLeft='3.75%w';--å·¦è·
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        print("å¾…æ·»åŠ ")
      end,
      {
        TextView,
        --textColor="#ff000000",
        text="more",
        textSize="15sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append(",");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" , ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("(");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" ( ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append(")");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" ) ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("0");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" 0 ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append(".");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" . ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
    {
      MaterialCardView,
      elevation="0",
      radius="5dp",
      layout_marginRight="8dp",
      layout_marginBottom="8dp",
      cardBackgroundColor="#FFC2C2C2",
      layout_width="10%w",
      layout_height="125",
      layout_marginRight='3.75%w';--å·¦è·
      cardElevation=0,
      cardBackgroundColor=colors.colorAccent,
      onClick=function()
        ç¼–è¾‘æ¡†.append("=");
        æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
      end,
      {
        TextView,
        --textColor="#ff000000",
        text=" = ",
        textSize="25sp",
        layout_gravity='center';--å¡ç‰‡é‡åŠ›
      };
    };
  };
};

--this.uiManager.getFragment(0).view.addView(loadlayout(é“))
--activity.setContentView(loadlayout(é“))
webView.addView(loadlayout(é“))

æ¸…ç©º.Visibility=8;--éšè—æ§ä»¶
è®¡ç®—æ¡†.append([[è¾“å…¥æ•°å­¦é—®é¢˜ï¼Œç‚¹å‡»"Ok"ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºè¿ç®—ç»“æœã€‚]])

é€‰æ‹©å‡½æ•°.onClick=function()--ç‚¹å‡»äº‹ä»¶
  pop=PopupMenu(activity,é€‰æ‹©å‡½æ•°)
  menu=pop.Menu
  menu.add("sin").onMenuItemClick=function(a)
    ç¼–è¾‘æ¡†.append("sin");
    æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
  end
  menu.add("cos").onMenuItemClick=function(a)
    ç¼–è¾‘æ¡†.append("cos");
    æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
  end
  menu.add("tan").onMenuItemClick=function(a)
    ç¼–è¾‘æ¡†.append("tan");
    æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
  end
  menu.add("logâ‚â‚€").onMenuItemClick=function(a)
    ç¼–è¾‘æ¡†.append("logâ‚â‚€");
    æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
  end
  menu.add("floor").onMenuItemClick=function(a)
    ç¼–è¾‘æ¡†.append("floor");
    æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
  end
  menu.add("min").onMenuItemClick=function(a)
    ç¼–è¾‘æ¡†.append("min");
    æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
  end
  menu.add("max").onMenuItemClick=function(a)
    ç¼–è¾‘æ¡†.append("max");
    æ¸…ç©º.Visibility=0;--æ˜¾ç¤ºæ§ä»¶
  end

  pop.show()
end;




å®Œæˆ.onClick=function()--ç‚¹å‡»äº‹ä»¶
  åŸå§‹æ•°æ®=ç¼–è¾‘æ¡†.Text
  if åŸå§‹æ•°æ®=="" then print("è¾“å…¥ä¸å¾—ä¸ºç©º") else
    å¤„ç†å=string.gsub(åŸå§‹æ•°æ®,"Ï€","math.pi")
    å¤„ç†å=string.gsub(å¤„ç†å,"e","math.exp(1)")
    å¤„ç†å=string.gsub(å¤„ç†å,"âˆš","math.sqrt")
    å¤„ç†å=string.gsub(å¤„ç†å,"sin","math.sin")
    å¤„ç†å=string.gsub(å¤„ç†å,"cos","math.cos")
    å¤„ç†å=string.gsub(å¤„ç†å,"tan","math.tan")
    å¤„ç†å=string.gsub(å¤„ç†å,"max","math.max")
    å¤„ç†å=string.gsub(å¤„ç†å,"min","math.min")
    å¤„ç†å=string.gsub(å¤„ç†å,"floor","math.floor")
    å¤„ç†å=string.gsub(å¤„ç†å,"logâ‚â‚€","math.log10")
    å¤„ç†å=string.gsub(å¤„ç†å,"abs","math.abs")
    --print(å¤„ç†å)
    if string.find(å¤„ç†å,"=")==nil then
      assert(loadstring("è®¡ç®—ç»“æœ=tostring("..å¤„ç†å..")"))()
      è®¡ç®—æ¡†.append("\nè®¡ç®—ï¼š"..åŸå§‹æ•°æ®.."="..è®¡ç®—ç»“æœ.."")
     else
      è®¡ç®—æ¡†.append("\næ±‚æ ¹ï¼š"..åŸå§‹æ•°æ®.."è¿™ä¸ªæˆ‘æš‚æ—¶è¿˜ä¸ä¼š")
    end
  ç¼–è¾‘æ¡†.setText("");
  æ¸…ç©º.Visibility=8;--éšè—æ§ä»¶
  end
end


